<%- include("../../views/partials/admin/header") %>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs/dist/cropper.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<style>
    .error-message {
        color: red;
    }
    .thumbnails-container {
        display: flex;
        overflow-x: auto;
        gap: 10px;
    }
    .thumbnail {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 5px;
        border: 1px solid #ddd;
    }
    .image-upload-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    .form-control, .form-select {
        border-radius: 5px;
        padding: 10px;
    }
</style>

<section class="content-main container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="content-header text-center mb-4">
                <h2 class="content-title">Add New Product</h2>
            </div>
        </div>
        <div class="col-lg-8 offset-lg-2">
            <div class="card p-4 shadow-sm">
                <div class="card-body">
                    <form method="POST" action="/admin/addProduct" enctype="multipart/form-data" onsubmit="return validateForm()">
                        <div class="mb-3">
                            <label for="product_name" class="form-label">Product Name</label>
                            <input type="text" name="name" class="form-control" id="product_name" placeholder="Enter product name" required>
                            <div id="productName-error" class="error-message"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Brand</label>
                            <select class="form-select" name="brand">
                                <option value="">Select a brand</option>
                                <% brands.forEach(brand => { %>
                                    <option value="<%= brand._id %>"><%= brand.name %></option>
                                <% }); %>
                            </select>
                            <div id="brand-error" class="error-message"></div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" rows="4" placeholder="Enter product description" required></textarea>
                            <div id="description-error" class="error-message"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <label class="form-label">Price</label>
                                <input name="price" type="number" class="form-control" placeholder="$" required>
                                <div id="price-error" class="error-message"></div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Quantity</label>
                                <input name="quantity" type="number" class="form-control" placeholder="Enter quantity" required>
                                <div id="quantity-error" class="error-message"></div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Color</label>
                                <input name="color" type="text" class="form-control" placeholder="Enter color" required>
                                <div id="color-error" class="error-message"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            <select class="form-select" name="category">
                                <option value="">Select a category</option>
                                <% categories.forEach(category => { %>
                                    <option value="<%= category._id %>"><%= category.name %></option>
                                <% }); %>
                            </select>
                            <div id="category-error" class="error-message"></div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-header">
                                <h4>Choose Image</h4>
                            </div>
                            <div class="card-body">
                                <div class="image-upload-container">
                                    <img src="" alt="Product Image Preview" id="imgView1" class="thumbnail">
                                    <input class="form-control" type="file" name="productImage" id="input1" accept="image/png, image/jpeg, image/jpg" onchange="viewImage1(event)">
                                    <div id="images-error" class="error-message"></div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary w-50" type="submit">Add Product</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/cropperjs/dist/cropper.min.js"></script>

<script>
    // Function to preview image before upload
    function viewImage1(event) {
        var reader = new FileReader();
        reader.onload = function() {
            var output = document.getElementById('imgView1');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>

<%- include("../../views/partials/admin/footer") %>




